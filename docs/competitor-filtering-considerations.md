# 競合サイトフィルタリング機能の検討観点

## 1. ユーザーの目的・ユースケース分析

### ユーザーが知りたいこと
- **自社サイトを改善するための具体的なアクション**
  - 同じレベルの競合から学ぶべき点
  - 実現可能な改善案
- **市場での自社の位置づけ**
  - 大手サイトとの差を認識
  - 現実的な目標設定

### ユースケース別のニーズ

#### A. ECサイト運営者（Shopify、自社EC等）
- **除外すべき？**: ケースバイケース
  - **除外する場合**: 大手EC（Amazon、楽天）は「競合」ではなく「市場環境」として認識。実現不可能な改善案が生成されるのを防ぐ
  - **含める場合**: 大手ECのコンテンツ戦略や構造を参考にしたい。ただし、改善案は「参考程度」として扱う
- **推奨**: **デフォルトで除外、オプションで含める**

#### B. 情報サイト・ブログ運営者
- **除外すべき？**: 場合による
  - **Wikipedia**: 権威性が高すぎて参考にならない → **除外推奨**
  - **大手メディア**: 参考になる場合もある → **オプション**
- **推奨**: **Wikipediaは除外、その他はオプション**

#### C. サービス提供サイト
- **除外すべき？**: 通常は含める
  - 同業他社のサイトは全て競合として分析すべき
  - 大手企業のサイトも参考になる
- **推奨**: **フィルタリング不要（または最小限）**

## 2. 除外対象サイトの分類

### カテゴリ1: 権威性が高すぎるサイト（常に除外推奨）
- **Wikipedia**
  - 理由: ユーザー生成コンテンツ、権威性が圧倒的、参考にならない
  - 判定: ドメイン `wikipedia.org`
- **政府機関サイト（.go.jp, .gov等）**
  - 理由: 公的機関、参考にならない
  - 判定: ドメインパターン

### カテゴリ2: 大手ECサイト（オプションで除外）
- **Amazon、楽天、Yahoo!ショッピング等**
  - 理由: ブランド力・予算・リソースが圧倒的、実現不可能な改善案が生成される可能性
  - 判定: ドメインリスト
  - **推奨**: デフォルトで除外、設定で含めることができる

### カテゴリ3: 大手メディアサイト（オプションで除外）
- **大手ニュースサイト、大手ポータルサイト等**
  - 理由: 権威性・ブランド力が高い、参考になる場合もある
  - 判定: ドメインリスト
  - **推奨**: デフォルトで含める、設定で除外できる

### カテゴリ4: ソーシャルメディア（常に除外推奨）
- **Twitter、Facebook、Instagram等**
  - 理由: 検索結果に表示されるが、記事分析の対象外
  - 判定: ドメインパターン

## 3. フィルタリングの実装方針

### オプション1: デフォルト除外リスト（推奨）
- **デフォルトで除外**: Wikipedia、大手ECサイト（Amazon、楽天、Yahoo!ショッピング）
- **設定でカスタマイズ可能**: ユーザーが除外リストを編集できる
- **メリット**: 
  - 実用的な改善案が生成される
  - ユーザーが不要な情報に惑わされない
- **デメリット**: 
  - 大手ECの戦略を参考にしたい場合に不便

### オプション2: 完全にユーザー設定
- **デフォルト**: フィルタリングなし
- **ユーザーが設定**: 除外リストを自分で作成
- **メリット**: 
  - 柔軟性が高い
  - ユーザーのニーズに完全対応
- **デメリット**: 
  - 初期設定が面倒
  - デフォルトで不適切な結果が表示される可能性

### オプション3: 分析タイプ別の自動判定（将来的）
- **ECサイト分析**: 自動的に大手ECを除外
- **情報サイト分析**: 自動的にWikipediaを除外
- **サービスサイト分析**: フィルタリング最小限
- **メリット**: ユーザー設定不要で最適化
- **デメリット**: 実装が複雑、判定ロジックの精度が必要

## 4. ユーザー体験への影響

### 分析結果の質への影響
- **除外しない場合**: 
  - 大手サイトのコンテンツが分析対象に含まれる
  - 「Amazonのような商品説明を追加」など実現不可能な改善案が生成される可能性
  - ユーザーが「これは無理だ」と感じて機能の価値を下げる
- **除外する場合**: 
  - より実用的な改善案が生成される
  - ユーザーが「これは実現できそう」と感じる
  - ただし、大手サイトの戦略を参考にしたい場合に不便

### 設定の複雑さ
- **シンプルな設定**: デフォルト除外リストのみ
- **詳細な設定**: カテゴリ別の除外設定、カスタム除外リスト
- **推奨**: まずはシンプルな設定から開始、必要に応じて拡張

## 5. 実装の優先順位

### Phase 1: 最小実装（推奨）
1. **デフォルト除外リスト**
   - Wikipedia（常に除外）
   - 大手ECサイト（Amazon、楽天、Yahoo!ショッピング）- デフォルトで除外
2. **設定画面での除外リスト編集**
   - ユーザーが除外リストをカスタマイズ可能
   - デフォルト除外を解除可能

### Phase 2: 拡張機能（将来的）
1. **カテゴリ別の除外設定**
   - ECサイト、情報サイト、サービスサイトなど
2. **自動判定**
   - サイトタイプを自動判定して最適な除外設定を適用

## 6. 検討すべき質問

### ユーザーへの質問（ユーザーリサーチ推奨）
1. **ECサイト運営者**: Amazonや楽天を競合として分析したいですか？それとも参考程度ですか？
2. **情報サイト運営者**: Wikipediaを競合として分析したいですか？
3. **サービス提供者**: 大手企業のサイトを競合として分析したいですか？

### 技術的な質問
1. **除外判定の精度**: ドメインベースで十分か？URLパターンも必要か？
2. **パフォーマンス**: 除外処理のオーバーヘッドは許容範囲か？
3. **メンテナンス**: 除外リストの更新頻度と方法は？

## 7. 推奨アプローチ

### 初期実装（MVP）
1. **デフォルト除外リスト**
   - Wikipedia（常に除外、設定不可）
   - 大手ECサイト（Amazon、楽天、Yahoo!ショッピング）- デフォルトで除外、設定で解除可能
2. **設定画面**
   - 除外リストの表示
   - 除外の解除/追加（大手ECサイトのみ）
   - 説明文: 「大手ECサイトは参考程度として扱うことを推奨します」

### 理由
- **実用的な改善案を生成**: ユーザーが実現可能な改善案を得られる
- **柔軟性**: ユーザーが大手ECを分析したい場合は設定で解除可能
- **シンプル**: 複雑な設定を避け、ユーザー体験を損なわない

## 8. 実装時の注意点

1. **除外理由の表示**: なぜ除外されたかをユーザーに説明
2. **除外リストの透明性**: 除外されたサイトを分析結果に表示（オプション）
3. **パフォーマンス**: 除外処理が分析時間に影響しないように
4. **多言語対応**: 除外リストは言語・地域によって異なる可能性（例: 日本の楽天、アメリカのAmazon）

