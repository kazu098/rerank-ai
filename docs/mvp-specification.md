# MVP仕様

## MVPのコア体験（First Wow Experience）

**「順位が落ちた瞬間に、リライトすべき箇所のビフォーアフターが届く」**

多くのSEOツールは「分析画面」にログインさせようとしますが、それは敷居を高くします。**「何もしなくても、勝てる修正案が降ってくる」**体験こそが、非専門家にとっての「魔法」です。

## 驚きを作るための3つの演出

1. **「気づき」の提供**
   - 「あなたの記事、今日3位から8位に落ちました。理由は競合が『価格表』を追加したからです」という、自分では気づけなかった事実を突きつける。

2. **「具体的な追加項目」の提示**
   - 抽象的なアドバイス（「網羅性を上げましょう」など）は一切排除
   - 箇条書き形式で「この情報が競合と比べて抜けているので、この観点でのこの項目を追加しろ」と具体的に提示
   - 例：「価格比較表」が欠けている → 「価格比較表を追加してください」

3. **URL一つで完結**
   - ユーザーの手間を「自社URLを登録するだけ」まで下げる。

## MVPでフォーカスすべき機能（これ以外は削る）

### ① 自動トリガー（順位下落時）

- **前提**: GSC連携が必要（OAuth 2.0で1クリック認証）
- **データ取得**: Google Search Console APIから以下を取得
  - 特定記事の時系列データ（日付、順位、インプレッション、CTR）
  - キーワード（クエリ）ごとの順位、CTR、インプレッション
- **順位下落の検知**:
  - **デフォルト設定**（MVP）:
    - 過去7日間の平均順位と現在の平均順位を比較
    - 急落の定義：平均順位が2位以上下落、または特定キーワードが10位以下に転落
  - **将来機能**: ユーザーがアラート設定でカスタマイズ可能
    - 過去何日間の平均順位か（3日、7日、14日、30日など）
    - 急落の判定条件（下落幅、転落条件など）
- **分析対象の選定**:
  - 「落選」キーワード（10位前後）を最優先で分析
  - 例：「価格」「月額」などのキーワードが全体の順位を下げている場合
- 検知頻度：毎日1回（前日のデータを取得、GSCデータは1-2日遅れで反映）
  - **将来機能**: ユーザーが通知頻度を設定可能（毎日、週1回まとめて、急落時のみなど）

### ② 手動スキャン（現状低迷時・GSC連携不要）

- ユーザーが任意のURLを入力
- **キーワード取得方法**:
  - 方法A: ユーザーがキーワードを入力（推奨・より確実）
  - 方法B: AIが記事内容からキーワードを自動推測（Geminiで記事分析）
- **Serper APIで現在の順位を自動特定**（GSC連携不要）
- 上位サイトとの差分を抽出し、改善案を提示

### ③ 競合との差分抽出

- そのキーワードで1位の記事と自社記事を比較
- 上位3サイトを分析し、共通して存在する要素を特定

### ④ 「ここを直せ」通知

- 箇条書き形式で追加すべき項目を提示し、メールかLINE/Slackに送信
- 通知内容：差分の要点 + 追加すべき項目の箇条書き（観点 + 項目名）
- **注意**: 完璧な修正記事全文は出力しない（APIコスト削減のため）

## 分析ロジックの詳細

### 順位下落時の分析フォーカス

- **目的**: 競合が「新しく追加した要素」の特定
- **手法**: 
  1. **GSC APIから時系列データを取得**
     - 過去N日間（例：7日間）の平均順位と現在の平均順位を比較
     - 例：4.1位（12/11）→ 6.7位（12/22）は約2.6位の下落
  2. **キーワードごとの分析**
     - 「落選」キーワード（10位前後）を特定
     - 例：「価格」「月額」などのキーワードが全体の順位を下げている
  3. **競合分析の実行**
     - 下落したキーワードで競合記事を分析
     - 前回分析時と現在の競合記事を比較し、追加された要素を抽出

### 現状低迷時の分析フォーカス

- **目的**: 上位サイトに共通して存在し、自社に「欠落している要素」の特定
- **手法**: 上位3サイトを分析し、共通パターン（見出し構造、コンテンツタイプ、情報の網羅性など）を抽出

## 出力形式

- **形式**: 箇条書き形式（Markdown形式）
- **内容**: 
  - 「この情報が競合と比べて抜けているので、この観点でのこの項目を追加しろ」
  - 例：「価格比較表」が欠けている → 「価格比較表を追加してください」
  - 例：「デメリット解消法」が欠けている → 「デメリット解消法のセクションを追加してください」
- **挿入位置**: 「○段落目の後」「○見出しの下」など具体的な指示（可能な場合）
- **注意**: 完璧な修正記事全文は出力しない（APIコスト削減のため）

