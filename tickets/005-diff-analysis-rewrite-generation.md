# チケット #005: 差分分析とリライト案生成（Gemini 2.5 Flash）

## 概要
自社記事と競合記事を比較し、追加すべき項目を箇条書き形式で生成する。

## 目的
競合との差分を分析し、具体的なリライト案を提示する。

## 実装内容

### 1. Gemini 2.5 Flash APIの連携
- [ ] Gemini APIクライアントの実装
- [ ] APIキーの設定
- [ ] エラーハンドリングの実装
- [ ] リトライ機能の実装

### 2. 自社記事の取得
- [ ] 自社記事のURLからコンテンツを取得
- [ ] 記事のテキストを抽出
- [ ] 記事の構造（見出し、段落等）を抽出

### 3. 競合記事との比較ロジック
- [ ] 自社記事と競合記事（上位3サイト）を比較
- [ ] 欠落している要素を特定
- [ ] 共通パターン（見出し構造、コンテンツタイプ等）を抽出
- [ ] 情報の網羅性を分析

### 4. リライト案生成
- [ ] Gemini APIにプロンプトを送信
- [ ] 箇条書き形式で追加すべき項目を生成
- [ ] 形式: 「この情報が競合と比べて抜けているので、この観点でのこの項目を追加しろ」
- [ ] 挿入位置の指示（可能な場合）

### 5. 出力の整形
- [ ] Markdown形式で整形
- [ ] 箇条書きの構造化
- [ ] 観点と項目名の明確化

## 成果物
- 差分分析機能
- リライト案生成機能
- 箇条書き形式の出力

## 技術スタック
- **AI**: Gemini 2.5 Flash API
- **形式**: Markdown

## プロンプト設計
- 自社記事と競合記事の内容を含める
- 箇条書き形式で追加すべき項目を生成するよう指示
- 観点と項目名を明確に分ける

## テスト項目
- [ ] Gemini APIが正常に動作する
- [ ] 自社記事と競合記事が正しく比較される
- [ ] 欠落している要素が正しく特定される
- [ ] 箇条書き形式のリライト案が正しく生成される
- [ ] 出力がMarkdown形式で整形される

## 見積もり
**期間**: 2-3日

## コスト
- **1記事分析あたり**: 約2.5円（Gemini 2.5 Flash API）

## 関連ドキュメント
- [最小実装仕様](../docs/minimum-viable-implementation.md)
- [コスト見積もり](../docs/cost-estimation.md)
- [MVP仕様](../docs/mvp-specification.md)

